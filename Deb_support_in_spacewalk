
== Deb support in Spacewalk ==

Hi, my name is Lukas Durfina. I am studying on Faculty of Information Technology,
Brno University of Technology. In my master thesis I am going to work on support
deb systems/packages in spacewalk. My technical consultant is Miroslav Suchy,
RHN Satellite Engineer.

== Debian repo with spacewalk packages ==

You can test my packages, which are stored in this repo:

http://www.stud.fit.vutbr.cz/~xdurfi00/spacewalk_debian/

configuration for sources.list:

deb http://www.stud.fit.vutbr.cz/~xdurfi00/spacewalk_debian/ lenny main[[BR]]

deb-src http://www.stud.fit.vutbr.cz/~xdurfi00/spacewalk_debian/ lenny main

'''ATTENTION: Packages are highly experimental.''' [[BR]]

Pulbic key is in attachment on the bottom of site.[[BR]]
Or use this:

{{{
gpg --keyserver keys.gnupg.net --recv-keys 121A13C3
apt-key add ~/.gnupg/pubring.gpg
}}}


== Example of creating package ==

 * wget http://www.redhat.com/spacewalk/source/0.3/rhn-client-tools-0.4.17-10.fc9.src.rpm
 * rpm2cpio rhn-client-tools-0.4.17-10.fc9.src.rpm | cpio -idmv --no-absolute-filenames
 * mv rhn-client-tools-0.4.17.tar.gz mv rhn-client-tools-0.4.17.orig.tar.gz
 * tar xfz rhn-client-tools-0.4.17.orig.tar.gz
 * cd rhn-client-tools-0.4.17
 * export DEBFULLNAME='name'
 * export DEBEMAIL='e-mail'
 * dh_make -c gpl
 * rm debian/*.ex debian/*.EX
 * edit files in debian/, in file: dirs will contain lines: usr/sbin, usr/share, usr/share/rhn
 * in control file add
   * add into Build-Depends: python-all-dev, python-support (>= 0.8), gettext, intltool, pychecker
   * add into Depends: ${python:Depends}, gnupg, hal, rhnlib (>= 2.1), python-dbus, rhpl
   * add Provides: ${python:Provides}
   * edit Homepage and Description
 * edit file rules (this is makefile)
   * for example main install command
{{{
$(MAKE) -f Makefile.rhn-client-tools install  DESTDIR=$(CURDIR)/debian/rhn-client-tools PREFIX=$(CURDIR)/debian/rhn-client-tools
}}}




== History ==

On this page I would describe progress of my work.

'''December 2008'''[[BR]]

I have 2 virtual servers with CentOS. On 1 of them spacewalk is installed, second
will be for testing. Now I am going to install debian on third virtual server
and then I will start work on creating deb packages.

'''January 2009'''[[BR]]

Now I have virtual Debian server. I started to experiment with debian packages.
I created deb package for rhnlib. Debian repo for getting packages was established.

'''August 2009'''[[BR]]

Rhnlib, rhpl and rhn-client-tools are in repository. It is possible to register
with debian machine in spacewalk.

'''October 2009'''[[BR]]

You can use apt-get install rhn-setup to install all available packages. There are
rhnsd, rhn-client-tools, rhncfg. Some of functions do not work and everything is in
experimental state, but if you like it, try it and send me feedback.



