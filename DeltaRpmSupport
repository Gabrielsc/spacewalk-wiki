= Delta RPMS =

== FAQ ==
* What is a delta rpm?
   * It is a collection of the binary diffs between all the individual files of two different versions of the same package with the rpm header of the new package prepended to the file.

* Can rpm work directly with drpms?
   * No, the full rpm must be recreated before installing.  Rpm itself has no idea what a drpm actually is and will try (and fail) to install it like a normal rpm.

* Can yum work directly with drpms themselves?
   * No, yum (with the presto yum plugin or a similiar plugin) can only work with drpms if they are in an appropriate repo.  The plugin itself recomposes the rpm into its original form before having yum install it.  

== Common Commands ==

Needed Packages: presto-utils, deltarpm, yum-presto
{{{
Create a drpm:
     makedeltarpm  oldrpm.rpm  newrpm.rpm  deltarpm.drpm 
}}}
{{{
Create drpms from a full repo:
	createdeltarpms  ./repo ./repo/DRPMS 
}}}
{{{
Reconstruct original rpm using on disk installation:
 	applydeltarpm  delta.drpm  new.rpm 
}}}
{{{
Reconstruct original rpm using an old rpm:
 	applydeltarpm  -r old.rpm  delta.drpm  new.rpm 
}}}
{{{
Create a presto repo (and the prestodelta.xml file):
	createprestorepo ./repo 
}}}
{{{
Then to finish the deal and link the prestodelta.xml to the repomod.xml file:
         modifyrepo  ./repodata/prestodelta.xml  ./repodata/ 
}}}


== Server == 

Generate drpms on the fly as requested and cache them on the server.  This handles RHEL content and custom content.

Will need to modify backend to generate preesto repo files and delta rpms.

Will need to make sure client works with yum-rhn-plugin (preliminary test seem to show that it will work).  Although the newest yum-presto plugin will not work on RHEL 5, we think that it will work nicely with the yum-rhn-plugin.



 
== My thoughts ==

 * I like the idea of delta rpms 'just being there' (i.e. so the user wouldn't have to do anything to get them there, or at least wouldn't have to generate them themselves and upload them to the sat).  
 * Since it does require extra cpu and memory resources to rebuild the rpm on each client, it should be an optional on the satellite to provide/build/publish deltarpms.
