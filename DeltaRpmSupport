= Delta RPMS =

== FAQ ==
* What is a delta rpm?
   * It is a collection of the binary diffs between all the individual files of two different versions of the same package with the rpm header of the new package prepended to the file.

* Can rpm work directly with drpms?
   * No, the full rpm must be recreated before installing.  Rpm itself has no idea what a drpm actually is and will try (and fail) to install it like a normal rpm.

* Can yum work directly with drpms themselves?
   * No, yum (with the presto yum plugin or a similiar plugin) can only work with drpms if they are in an appropriate repo.  The plugin itself recomposes the rpm into its original form before having yum install it.  

== Common Commands ==

Needed Packages: presto-utils, deltarpm, yum-presto
{{{
Create a drpm:
     makedeltarpm  oldrpm.rpm  newrpm.rpm  deltarpm.drpm 
}}}
{{{
Create drpms from a full repo:
	createdeltarpms  ./repo ./repo/DRPMS 
}}}
{{{
Reconstruct original rpm using on disk installation:
 	applydeltarpm  delta.drpm  new.rpm 
}}}
{{{
Reconstruct original rpm using an old rpm:
 	applydeltarpm  -r old.rpm  delta.drpm  new.rpm 
}}}
{{{
Create a presto repo:
	createprestorepo ./repo 
}}}
{{{
Then to finish the deal:
         modifyrepo  ./repodata/prestodelta.xml  ./repodata/ 
}}}


== The future == 
{{{
 1. If eng decides to generate drpms
    a) modify sync to simply pull them down

 2. If they don't (or we decide not to use theirs).
    a) generate them on demand (Similar to lars's script)
        - Can take upwards of a minute to generate the larger rpms (longer on slower machines)
    b) generate them upon syncing
}}}
== Custom Channels/Content ==

 1.  Allow users to 'push' drpms for their custom content (then we have to manage it).
 2.  Automatically build them for content users push
 3.  Allow the user to use the system to selectively build drpms for certain packages

 
== My thoughts ==

 * I like the idea of delta rpms 'just being there' (i.e. so the user wouldn't have to do anything to get them there, or at least wouldn't have to generate them themselves and upload them to the sat).  
 * Since it does require extra cpu and memory resources to rebuild the rpm on each client, it should be an optional on the satellite to provide/build/publish deltarpms.
