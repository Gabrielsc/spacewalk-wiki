= Multiple Organizations High Level Specification =

== Introduction ==

The multiple organization support feature in Spacewalk allows you to partition your Spacewalk server into different organizations that each have their own set of entitlements, systems, and content that other organizations on the Spacewalk server cannot access. This document describes the high level design overview for this feature. 

== DB Schema ==

=== rhnTrustedOrgRing ===
rhnTrustedOrgRing will handle the trusted organizations that Spacewalk Admin will setup among the various organizations that are defined. Note this does not mean the orgs will trust each other, rather it merely gives the Org Admins of those Organizations the opportunity to share channel content and system migrations if they wish. 

 * org_id: number, not null and fk to web_customer(id)
 * trust_org_id: number, not null and fk to web_customer(id)
 * created: date(sysdate), not null
 * modified: date(sysdate), not null

unique index on rhnTrustedOrgRing(org_id, trust_org_id)

=== rhnOrgTrust ===
If the orgs are in a trusted relationship as defined by the Spacewalk Admin in the rhnTrustedOrgRing, then the org admins can setup channel content and system migrations to occur between orgs in their trust ring. The rhnOrgTrust table will tract the orgs an Org Admin selects out of their trust ring. 

 * org_id: number, not null and fk to web_customer(id)
 * trust_org_id: number, not null and fk to web_customer(id)
 * trust_type: number, not null and fk to rhnTrustType(id)
 * created: date(sysdate), not null
 * modified: date(sysdate), not null

unique index on rhnOrgTrust(org_id, trust_org_id)

=== rhnTrustType ===
This table will contain the various resources an organization can share. For this release, both channel content and system migration are available. 

 * id: number, not null, primary key
 * label: varchar2(32), not null
 * name: varchar2(64), not null
 * created: date(sysdate), not null
 * modified: date(sysdate), not null

The following static data will be populated:

 * channel_sharing (Channel Sharing)
 * system_migration (System Migration)

=== rhnChannel ===
This table will require an additional column to handle if the Org Admin will allow orgs from its Trusted Ring to have access to Channel Content, 

 * public: char(1) default('N'), check public in ('Y', 'N')

== New Pages ==
