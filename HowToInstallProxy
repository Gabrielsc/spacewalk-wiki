= Spacewalk Proxy Installation Instructions =

'''These instructions are for Spacewalk Proxy 0.2 onwards'''

If you're looking for instructions for the RHN Proxy product see http://www.redhat.com/docs/manuals/satellite/

== Prerequisites ==

  * Disable SELinux (work is ongoing to allow SELinux to remain enforcing see [wiki:Features/SELinux])
  * Around 6GB storage per distribution under /var/spool/squid (or whereever you want your Squid cache to be)
  * Outbound open ports 80, 443, 4545 (only if you want to enable monitoring) and 5269
  * Inbound open ports 80, 443 and 5222
  * An upstream Spacewalk or RHN Satellite server with an available Proxy entitlement (probably won't work against RHN Hosted)

== Installation ==

RPM downloads of the project are available through a yum repository

  * http://spacewalk.redhat.com/yum

To use the repository install spacewalk-repo RPM:

{{{
rpm -Uvh http://spacewalk.redhat.com/yum/0.5/RHEL/5/`uname -i`/os/Packages/spacewalk-repo-0.5-2.el5.noarch.rpm
}}}

Then just ask yum to install the application:

{{{
yum install spacewalk-proxy-installer
}}}

This will pull down and install the set of RPMs required for the installer to run. Below is an example of the set of packages pulled in:

{{{
========================================================================================================================
 Package                                 Arch                 Version                     Repository               Size
========================================================================================================================
Installing:
 spacewalk-proxy-installer               noarch               0.5.25-1.el5                spacewalk                40 k
Installing for dependencies:
 rhncfg                                  noarch               5.9.5-1.el5                 spacewalk                58 k
 rhncfg-actions                          noarch               5.9.5-1.el5                 spacewalk                28 k
 rhncfg-client                           noarch               5.9.5-1.el5                 spacewalk                24 k
 rhncfg-management                       noarch               5.9.5-1.el5                 spacewalk                33 k
}}}

If this is the first time installing an RPM from the Spacewalk repo, yum will prompt you to install the GPG key:

{{{
Importing GPG key 0x430A1C35 "Spacewalk <spacewalk-devel@redhat.com>" from http://spacewalk.redhat.com/yum/RPM-GPG-KEY-spacewalk
Is this ok [y/N]: y
}}}

Then you need to configure the proxy. Run:

{{{
configure-proxy.sh
}}}

and follow the prompts. This will download and configure the nessecery packages. Once installed use /usr/sbin/rhn-proxy to stop and start the service.

You should now be able to navigate to the hostname of your proxy in a web browser and see the Spacewalk Proxy page. If you see an error here there's likely something wrong with your install.

  * If all seems well you can now try [RegisteringClients Registering Clients]
  * If you're having problems check [DebuggingProxy Debugging Proxy]