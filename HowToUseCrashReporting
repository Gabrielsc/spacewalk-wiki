= How to use software crash reporting in Spacewalk =

== Overview ==

Spacewalk 1.9 extended on the software crash reporting functionality originally introduced in Spacewalk 1.8.

If you're using / have installed '''abrt''' ([https://fedorahosted.org/abrt/]) on your systems registered to Spacewalk, you may take advantage
of the software crash functionality provided by Spacewalk.

This functionality allows:

* your clients to automatically report software crashes captured by abrt directly to the Spacewalk server
* process the captured crashes in a centralized fasion: WEB UI & API for manipulation with the crashes.

== Quick start ==

To use the software crash reporting functionality:

1. Install '''spacewalk-abrt''' package on your client system(s). This package will install '''abrt''' as its dependency. Note: neither abrt nor spacewalk-abrt are available for RHEL-5 / CentOS-5.
2. In your webui, navigate to:

{{{
    Systems -> | desired system | -> Software -> Software Crashes
}}}

to see the list of software crashes that occurred on the registered system. Click on the particular crash to see the crash details and crash files captured for this crash report.

3. Use the following API calls to manipulate with the reported software crashes:

{{{
system.crash.getLastReportDate()
system.crash.getUniqueCrashCount()
system.crash.getTotalCrashCount()
system.crash.listSystemCrashes()
system.crash.listSystemCrashFiles()
system.crash.deleteCrash()
system.crash.getCrashFileUrl()
system.crash.getCrashFile()
}}}

Consult the API documentation for further details.

4. With every software crash your systems will upload files captured by abrt during the crash to your Spacewalk server. Since these files may have arbitrary length, you can set up an upload size limit for a single crash file.
This is an organization wide settings and can be changed in webui:
{{{
Admin -> | your organization | -> Configuration
}}}

or with the following API calls:
{{{
org.getCrashFileSizeLimit()
org.setCrashFileSizeLimit()
}}}

== Usage details ==

The spacewalk-abrt package has two important components:
1. configuration file for abrt: /etc/libreport/events.d/spacewalk.conf
2. spacewalk-abrt utility: /usr/bin/spacewalk-abrt

spacewalk-abrt package contains the following configuration file:

{{{
/etc/libreport/events.d/spacewalk.conf
}}}

This configuration file instructs abrt daemon to use /usr/bin/spacewalk-abrt utility to automatically report every new crash that occurs on the system to your Spacewalk server. This is done in a fully automated fashion and ordinarilly does not require any human intervention.

Should you ever need to report a crash manually, use the spacewalk-abrt utility, executed from your client system:
{{{
# spacewalk-abrt --help
Usage: spacewalk-abrt [options]
  Commands:
    Specify one of the commands below

    --report=REPORT     Upload content of the specified problem directory
    --update-count=UPDATE_COUNT
                        Update crash count for the specified problem directory
    --sync              Synchronize missing problem directories
}}}