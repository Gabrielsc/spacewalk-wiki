= Oracle 10g Express Edition Setup =
== Limitations ==
 * 1GB memory (max)
 * 4GB disk space (max)
 * one database (max)

== Installation ==
If you do not have an Oracle Database, you can [http://www.oracle.com/technology/software/products/database/xe/htdocs/102xelinsoft.html download Oracle XE].

You may need an account to download the rpms. Seems like a crap shoot to me. So download

 * oracle-xe-univ-10.2.0.1-1.0.i386.rpm

You will also need a client. For this you should [http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html download Oracle Instant Client]. Download all three (3) of the
following. For now, stick with the 10.2.0.4 version.

 * oracle-instantclient-basic-10.2.0.4-1.i386.rpm
 * oracle-instantclient-jdbc-10.2.0.4-1.i386.rpm
 * oracle-instantclient-devel-10.2.0.4-1.i386.rpm

=== Letting yum resolve deps ===
nogpgcheck is required because the oracle rpms are not signed.
 * sudo yum install --nogpgcheck oracle-xe-univ-10.2.0-1.0.i386.rpm oracle-instantclient-basic-10.2.0.4-1.i386.rpm oracle-instantclient-jdbc-10.2.0.4-1.i386.rpm oracle-instantclient-devel-10.2.0.4-1.i386.rpm

=== manually ===

 * sudo yum install libaio
 * sudo rpm -Uvh oracle-xe-univ-10.2.0-1.0.i386.rpm oracle-instantclient-basic-10.2.0.4-1.i386.rpm oracle-instantclient-devel-10.2.0.4-1.i386.rpm oracle-instantclient-jdbc-10.2.0.4-1.i386.rpm


== setup server ==
Configure the Oracle XE database


{{{
 sudo /etc/init.d/oracle-xe configure
}}}


Here are some sane values:
{{{
 HTTP port: 9000 (8080 is tomcat)
 listener port: 1521
 password:<password> for SYS/SYSTEM
 have oracle start at boot: y
}}}
If you messed up these entries -> 
{{{
rpm -e oracle-xe-client oracle-xe-univ
sudo yum install --nogpgcheck oracle-xe-univ-10.2.0-1.0.i386.rpm oracle-xe-client-10.2.1-1.0.i386.rpm
}}}




Login to the webui and configure a user:
 * If you do not have X (so can't use firefox) or using ssh to go to this terminal run the following command->
{{{ssh -L 9000:localhost:9000 -l root -N <oracle machine name>}}} and then you can browse to http://localhost:9000/apex on your machine and continue. (thank you Jbowes).
 * browse to http://127.0.0.1:9000/apex
 * login: sys
 * click Administration
 * click Database Users
 * click "Create >" button
 * username: '''spacewalk'''
 * password: '''spacewalk'''
 * Confirm password: '''spacewalk'''
 * Give spacewalk all system privileges (check All)
 * click Create button
That's it, proceed with client setup.

== setup client ==
You need to put the Oracle clients on your path.
{{{
 export PATH=$PATH:/usr/lib/oracle/xe/app/oracle/product/10.2.0/client/bin/
}}}

You also need to configure the tns names entry for your database. Place the following into {{{/etc/tnsnames.ora}}}:
{{{
 XE =
    (DESCRIPTION =
       (ADDRESS_LIST =
          (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
       )
       (CONNECT_DATA =
          (SERVICE_NAME = xe)
       )
    )
}}}

Test your connection with sqlplus:
{{{
sqlplus spacewalk/spacewalk@xe
}}}

If '''spacewalk''' user was properly setup you should see a '''Connected to:''' message:

{{{
SQL*Plus: Release 10.2.0.1.0 - Production on Sat May 17 10:52:56 2008

Copyright (c) 1982, 2005, Oracle.  All rights reserved.


Connected to:
Oracle Database 10g Express Edition Release 10.2.0.1.0 - Production

SQL>
}}}

Note: you might want to install 'rlwrap' to make your sqlplus more usable.
 {{{yum install rlwrap}}}
you can then do 
{{{
rlwrap sqlplus spacewalk/spacewalk@xe
}}} 
and retain 'curses' like behavior with sql plus (sql call history maintenance, etc)

== setup schema (optional) ==

If you just want the Spacewalk database schema installed you can do the following:

{{{
 cd $GITDIR/schema
 make satellite-clean satellite-release TBS=USERS SQLUSER=spacewalk/spacewalk@xe
}}}

If you plan on installing Spacewalk and running the entire application you can skip this step.  The spacewalk-setup program will install the schema for you.

== misc links ==
[http://www.oracle.com/technology/software/products/database/xe/files/install.102/b25144/toc.htm Installation Guide]

[http://www.davidpashley.com/articles/oracle-install.html Installing Oracle XE on Debian]
