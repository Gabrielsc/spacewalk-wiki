= Oracle 10g Express Edition Setup =
== Limitations ==
 * 1GB memory (max)
 * 4GB disk space (max)
 * one database (max)

== Installation ==
If you do not have an Oracle Database, you can [http://www.oracle.com/technology/software/products/database/xe/htdocs/102xelinsoft.html download Oracle XE].

You may need an account to download the rpms. Seems like a crap shoot to me. Download "Oracle Database 10g Express Edition ('''Universal''')", i.e. Multi-byte Unicode/UTF-8 database not "Western European" Single-byte LATIN1 database.

 * oracle-xe-univ-10.2.0.1-1.0.i386.rpm

You will also need a client. For this you should download the Oracle Instant Client: [http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html i386 client] or [http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxx86_64soft.html x86_64]. Download all four (4) of the
following. For now, stick with the 10.2.0.4 version.

 * oracle-instantclient-basic-10.2.0.4-1.i386.rpm
 * oracle-instantclient-jdbc-10.2.0.4-1.i386.rpm
 * oracle-instantclient-devel-10.2.0.4-1.i386.rpm
 * oracle-instantclient-sqlplus*.rpm 


=== Letting yum resolve deps ===
nogpgcheck is required because the oracle rpms are not signed.
 * sudo yum install --nogpgcheck oracle-xe-univ-10.2.0.1-1.0.i386.rpm oracle-instantclient-basic-10.2.0.4-1.i386.rpm oracle-instantclient-jdbc-10.2.0.4-1.i386.rpm oracle-instantclient-devel-10.2.0.4-1.i386.rpm oracle-instantclient-sqlplus*.rpm

(or x86_64 depending)

=== manually ===

 * sudo yum install libaio
 * sudo rpm -Uvh oracle-xe-univ-10.2.0.1-1.0.i386.rpm oracle-instantclient-basic-10.2.0.4-1.i386.rpm oracle-instantclient-devel-10.2.0.4-1.i386.rpm oracle-instantclient-jdbc-10.2.0.4-1.i386.rpm oracle-instantclient-sqlplus*.rpm


== Server Setup ==
Configure the Oracle XE database

  * Ensure your hostname is in /etc/hosts prior to running "oracle-xe configure"

{{{
 sudo /etc/init.d/oracle-xe configure
}}}


Here are some sane values:
{{{
 HTTP port: 9000 (8080 is tomcat)
 listener port: 1521
 password:<password> for SYS/SYSTEM
 have oracle start at boot: y
}}}

'''NOTE:''' if you messed up these entries, you '''WILL''' have to uninstall and reinstall.

 * rpm -e oracle-xe-client oracle-xe-univ
 * OracleXeSetup#Installation


Login to the webui and configure a user:

  '''NOTE:''' Oracle XE web interface is accessible at http://127.0.0.1:9000/apex by default. If you want access it from the outside add this line to your listener configuration:
    (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=0.0.0.0)(PORT=9000))(Presentation=HTTP)(Session=RAW))
  and do not forget restart listener. Example of modified /usr/lib/oracle/xe/app/oracle/product/10.2.0/server/network/admin/listener.ora:
{{{
# listener.ora Network Configuration File:

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = /usr/lib/oracle/xe/app/oracle/product/10.2.0/server)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))
      (ADDRESS = (PROTOCOL = TCP)(HOST = spacewalk-server.example.com)(PORT = 1521))
    )
    (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=spacewalk-server.example.com)(PORT=9000))(Presentation=HTTP)(Session=RAW))
  )

DEFAULT_SERVICE_LISTENER = (XE)
}}}

  '''NOTE:''' You can also forward http://127.0.0.1:9000/apex via ssh tunnel:
  {{{ssh -L 9000:localhost:9000 -l root -N <oracle machine name>}}}. This should allow you to browse to localhost, proceed with   
  the rest of the instructions.

  '''NOTE:''' The 'correct' oracle way would be to execute the following with sysdba privileges:
{{{
SQL> EXEC DBMS_XDB.SETLISTENERLOCALACCESS(FALSE);
}}}

  '''NOTE:''' If you messed up the APEX port in configure, you can use the following command to 'fix' it:
{{{
SQL> EXEC DBMS_XDB.SETHTTPPORT(9000); 
}}}

 * browse to http://127.0.0.1:9000/apex
 * login: sys
 * click Administration
 * click Database Users
 * click "Create >" button
 * username: '''spacewalk'''
 * password: '''spacewalk'''
 * Confirm password: '''spacewalk'''
 * Give spacewalk all system privileges (check All and add DBA role) 
 * click Create button
That's it, proceed with [OracleXeSe