[wiki:PostgreSqlProject Main Project Page]

== Project Tasks ==

Project tasks are work items that need to be tracked.  They are different then issues in that items listed here
simply need to be completed and are not necessarily risks to the project.

=== General ===
||'''ID'''||'''Name'''||'''Description'''||'''Status'''||'''Assigned'''||'''Notes'''
||G1||Dead Query Script||Write a script to: find queries defined but not referenced in perl code; find queries defined but not referenced in java code; find queries defined in both (perl migrated to java).|| done ||dgoodwin|| determined that the number of queries involved did not warrant the risk ||
||G2||Query Script||Enhance script to list files containing SQL; provides file and query counts|| done || zeus || [attachment:file_query_count script]||
||G3||Query File List||Publish ''final'' list of files containing queries that need to be tagged.  This item will be created by merging script task(s) output|| || || ||
||G4||Add comments||Add SQL comments to every query and view || || bmomjian || ||
||G5||Postgres Schema||Create test version of Postgres schema, for testing of queries|| done || jortel || Used ora2pg 4.11 generated [[attachment:ddl.sql.gz?format=raw ddl]] '''DDL only'''.  See G10. ||
||G6||Database Versions||What is the minimum supported version of  Postgres?|| jortel || done || ![1] This will depend on targeted versions of RHEL.  '''Decided''': RHEL5+ which means '''8.1+'''||
||G7||Custom Data Type||Add EVR_T data type with aggregate|| ||  || Only (1) table with this column type: RHNPACKAGEEVR. ||
||G8||Prepare git branch||Either clean up the existing postgres branch, or create a new branch and ''cherry pick'' Devin's changes|| done ||dgoodwin|| Would be good to have this by COB 12/19 ||
||G9||Postgres Dev Packages||Create a devel yum repo containing custom packages required for satellite to use __both__ oracle and postgres|| || dgoogwin|| ||
||G10||Postgres DDL|| Publish an initial postgres schema generated by ora2pg  || done || jortel,bmomjian || Files added to git and are to be cleaned up by bmomjian ||
||G11||Sample Dataset||Create a sample database dataset that can be loaded in both oracle and postgres to be used by developers|| || jortel||||
||G12||Monitoring||Are we converting the monitoring module?|| done || tsanders || Yes ||
||G13||Remove dead java queries|| Remove the dead java data source queries from git || done || dgoodwin ||  ||
||G14||Orafce|| Orafce requires Postgres 8.2; port Orafce to Postgres 8.1; packaging issues? || || bmomjian || I have tested Orafce 2.1.4 on PG 8.1 and aside from a few regression test alignment differences, it works fine||
||G15|| Setup schema review meeting || Have developers review schema beforehand, meet to discuss core tables and answer questions with as many developers as possible. || || jortel || ||
||G16|| db-control || what about the RHN db-control stuff.  It's probably oracle based || || || ||
||G17|| Prioritized Modules || Provide a prioritized list of modules (feature sets).  || || jortel || ||

=== Queries ===
||'''ID'''||'''Name'''||'''Description'''||'''Status'''||'''Assigned'''||'''Notes'''
||Q1||Sysdate|| Convert sysdate to appropriate current_date and current_timestamp || || || ||
||Q2||Sysdate addition|| Add Postgres timestamp + float compatibility operator || || || ||
||Q3||nextval()|| Handle nextval() differences || || || ||

=== Notes ===
 ![1]:: 
 RHEL-4 includes postgres 7.4 and RHEL-5 includes postgres 8.1.  The latest postgres is 8.3.8.
 7.4 has the following limitations (Exceptions, Save Points) appear to be applicable to spacewalk.

=== Functional Breakdown ===

This is just a scratch pad to develop the project plan :)

This assumes that __all__ of the stored procedures (not within a package) are common and need to be converted.

==== Iteration {{{#1}}} ====

|| '''Function''' || '''Tables''' || '''Viewes''' || '''Packages''' || '''Java Queries'''|| '''Perl Queries''' || '''Python Queries'''|| '''Notes''' || 
|| Users || WEB_CONTACT, WEB_CUSTOMER_NOTIFICATION, WEB_USER_CONTACT_PERMISSION, WEB_USER_PERSONAL_INFO, WEB_USER_PREFIX, WEB_USER_SITE_INFO, WEB_USER_SITE_TYPE, RHNUSERDEFAULTSYSTEMGROUPS, RHNUSERGROUP, RHNUSERGROUPMEMBERS, RHNUSERGROUPTYPE, RHNUSERINFO, RHNUSERINFOPANE, RHNUSERMESSAGE, RHNUSERMESSAGESTATUS, RHNUSERMESSAGETYPE, RHNUSERRESERVED, RHNUSERSERVERGROUPPERMS, RHNUSERSERVERPERMS, RHNUSERSERVERPREFS, || RHNUSERACTIONOVERVIEW, RHNUSERAPPLETOVERVIEW, RHNUSERAVAILABLECHANNELS, RHNUSERCHANNEL, RHNUSERCHANNELFAMILYPERMS, RHNUSERCHANNELTREEVIEW, RHNUSERGROUPMEMBERSHIP, RHNUSERMANAGEDSERVERGROUPS, RHNUSERSERVERPERMSDUPES, RHNUSERSINORGOVERVIEW, RHNUSERTYPEARRAY, RHNUSERTYPEBASE, RHNUSERTYPECOMMAVIEW, || rhn_user  || User_queries.xml || {{{UserActions.pm, UserGroup.pm, User.pm}}} ||  <python> || Notes ||
|| Orgs || WEB_CUSTOMER,RHNREGTOKENORGDEFAULT, RHNMONITORGRANULARITY, RHNORGCHANNELSETTINGS, RHNORGCHANNELSETTINGSTYPE, RHNORGENTITLEMENTS, RHNORGENTITLEMENTTYPE, RHNORGERRATACACHEQUEUE, RHNORGINFO, RHNORGQUOTA, RHNTRUSTEDORGS, || RHNDEMOORGS, RHNORGCHANNELFAMILYPERMISSIONS, RHNORGCHANNELTREEVIEW, RHNORGERRATA, RHNORGPACKAGEOVERVIEW, RHNPAIDORGS, RHNUSERSINORGOVERVIEW, || rhn_org, rhn_quota, rhn_bel || User_queries.xml, {{{CustomDataKey_legacyUser.hbm.xml}}}, {{{OrgEntitlementType.hbm.xml}}}, {{{OrgImpl.hbm.xml}}}, {{{SystemMigration.hbm.xml}}}, {{{TemplateString.hbm.xml}}} || Org.pm ||  <python> || Notes ||
|| Servers || RHNSERVERPRESERVEFILELIST, RHNSERVERDMI, RHNSERVERCHANNELARCHCOMPAT, RHNSERVERCONFIGCHANNEL, RHNSERVERCUSTOMDATAVALUE, RHNSERVERACTION, RHNSERVERACTIONPACKAGERESULT, RHNSERVERACTIONSCRIPTRESULT, RHNSERVERACTIONVERIFYMISSING, RHNSERVERACTIONVERIFYRESULT, RHNSERVERARCH, RHNSERVERCACHEINFO, RHNSERVERCHANNEL, RHNSATELLITESERVERGROUP, RHNSERVER, RHNSERVERPROFILE, RHNSERVERPROFILEPACKAGE, RHNSERVERPROFILETYPE, RHNSERVERSERVERGROUPARCHCOMPAT, RHNSERVERTOKENREGS, RHNSERVERUUID, RHNSNAPSHOTSERVERGROUP, RHNSNPSERVERQUEUE, RHN_NOTIFSERVERS, RHN_SERVER_MONITORING_INFO, RHNUSERSERVERGROUPPERMS, RHNUSERSERVERPERMS, RHNUSERSERVERPREFS, RHNSERVEREVENT, RHNSERVERGROUP, RHNSERVERGROUPMEMBERS, RHNSERVERGROUPNOTES, RHNSERVERGROUPTYPE, RHNSERVERGROUPTYPEFEATURE, RHNSERVERHISTORY, RHNSERVERINFO, RHNSERVERINSTALLINFO, RHNSERVERLOCATION, RHNSERVERLOCK, RHNSERVERMESSAGE, RHNSERVERNEEDEDERRATACACHE, RHNSERVERNEEDEDPACKAGECACHE, RHNSERVERNETINTERFACE, RHNSERVERNETWORK, RHNSERVERNOTES, RHNSERVERPACKAGE, RHNSERVERPACKAGEARCHCOMPAT, RHNSERVERPATH, RHNSYSTEMMIGRATIONS, RHNUSERDEFAULTSYSTEMGROUPS || RHNCHANNELFAMILYSERVERPHYSICAL, RHNCHANNELFAMILYSERVERS, RHNCHANNELFAMILYSERVERVIRTUAL, RHNENTITLEDSERVERS, RHNSERVERENTITLEMENTPHYSICAL, RHNSERVERENTITLEMENTVIEW, RHNSERVERENTITLEMENTVIRTUAL, RHNSERVERERRATATYPEVIEW, RHNSERVERFEATURESVIEW, RHNSERVERGROUPMEMBERSHIP, RHNSERVERGROUPOVERVIEW, RHNSERVERGROUPOVLITEHELPER, RHNSERVERNEEDEDPACKAGEVIEW, RHNSERVEROUTDATEDPACKAGES, RHNSERVEROVERVIEW, RHNUSERMANAGEDSERVERGROUPS, RHNUSERSERVERPERMSDUPES, RHNVISIBLESERVERGROUP, RHNVISIBLESERVERGROUPMEMBERS, RHNVISSERVERGROUPMEMBERSHIP, RHNVISSERVERGROUPOVERVIEW, RHNVISSERVERGROUPOVERVIEWLITE || rhn_server, rhn_cache,  || System_queries.xml, {{{SystemGroup_queries.xml}}}, system_search.xml, {{{CPUArch.hbm.xml}}}, {{{CustomDataValue_legacyUser.hbm.xml}}}, {{{InstalledPackage.hbm.xml}}}, {{{Location.hbm.xml}}}, {{{Network.hbm.xml}}}, {{{NetworkInterface.hbm.xml}}}, {{{Note_legacyUser.hbm.xml}}}, {{{PushClientState.hbm.xml}}}, {{{ServerArch.hbm.xml}}}, {{{ServerGroup.hbm.xml}}}, {{{ServerGroupType.hbm.xml}}}, {{{Server_legacyUser.hbm.xml}}}, {{{ServerSnapshot.hbm.xml}}}, {{{VirtualInstance.hbm.xml}}}, {{{VirtualInstanceState.hbm.xml}}}, {{{VirtualInstanceType.hbm.xml}}} || {{{CdDevice.pm}}}, {{{HwDevice.pm}}}, {{{NetInfo.pm}}}, {{{NetInterface.pm}}}, {{{StorageDevice.pm}}}  ||  <python> || Notes ||
|| Channels || RHNACTIONCONFIGCHANNEL, RHNCHANNEL, RHNCHANNELARCH, RHNCHANNELCLONED, RHNCHANNELCOMPS, RHNCHANNELDOWNLOADS, RHNCHANNELERRATA, RHNCHANNELFAMILY, RHNCHANNELFAMILYLICENSE, RHNCHANNELFAMILYLICENSECONSENT, RHNCHANNELFAMILYMEMBERS, RHNCHANNELFAMILYVIRTSUBLEVEL, RHNCHANNELNEWESTPACKAGE, RHNCHANNELNEWESTPACKAGEAUDIT, RHNCHANNELPACKAGE, RHNCHANNELPACKAGEARCHCOMPAT, RHNCHANNELPARENT, RHNCHANNELPERMISSION, RHNCHANNELPERMISSIONROLE, RHNCHANNELPRODUCT, RHNCHANNELTRUST, RHNREGTOKENCHANNELS, RHNREGTOKENCONFIGCHANNELS, RHNCONFIGCHANNEL, RHNCONFIGCHANNELTYPE, RHNDISTCHANNELMAP, RHNSERVERCHANNELARCHCOMPAT, RHNSERVERCONFIGCHANNEL, RHNSERVERCHANNEL, RHNRELEASECHANNELMAP, RHNSATELLITECHANNELFAMILY, RHNSNAPSHOTCHANNEL, RHNSNAPSHOTCONFIGCHANNEL, RHNERRATAFILECHANNEL, RHNERRATAFILECHANNELTMP, RHNKICKSTARTCHILDCHANNEL, RHNORGCHANNELSETTINGS, RHNORGCHANNELSETTINGSTYPE, RHNPATHCHANNELMAP, RHNPRIVATECHANNELFAMILY, RHNPRODUCTCHANNEL, RHNPUBLICCHANNELFAMILY  || RHNAVAILABLECHANNELS, RHNCHANNELFAMILYOVERVIEW, RHNCHANNELFAMILYPERMISSIONS, RHNCHANNELFAMILYSERVERPHYSICAL, RHNCHANNELFAMILYSERVERS, RHNCHANNELFAMILYSERVERVIRTUAL, RHNCHANNELNEWESTPACKAGEVIEW, RHNCHANNELPACKAGEOVERVIEW, RHNCHANNELPERMISSIONS, RHNCHANNELTREEVIEW, RHNORGCHANNELFAMILYPERMISSIONS, RHNORGCHANNELTREEVIEW, RHNSHAREDCHANNELTREEVIEW, RHNSHAREDCHANNELVIEW, RHNUSERAVAILABLECHANNELS, RHNUSERCHANNEL, RHNUSERCHANNELFAMILYPERMS, RHNUSERCHANNELTREEVIEW  || rhn_channel || Channel_queries.xml, {{{ChannelArch.hbm.xml}}}, {{{ChannelFamily.hbm.xml}}}, {{{Channel.hbm.xml}}}, {{{DistChannelMap.hbm.xml}}}, {{{ProductName.hbm.xml}}}, {{{ReleaseChannelMap.hbm.xml}}}  || Channel.pm ||  <python> || Notes ||
|| Packages || RHNACTIONPACKAGEREMOVALFAILURE, RHNACTIONPACKAGE, RHNACTIONPACKAGEANSWERFILE, RHNACTIONPACKAGEDELTA, RHNACTIONPACKAGEORDER, RHNCHANNELNEWESTPACKAGE, RHNCHANNELNEWESTPACKAGEAUDIT, RHNCHANNELPACKAGE, RHNCHANNELPACKAGEARCHCOMPAT, RHNSERVERACTIONPACKAGERESULT, RHNREGTOKENPACKAGES, RHNSERVERPROFILEPACKAGE, RHNERRATAFILEPACKAGE, RHNSNAPSHOTPACKAGE, RHNSOLARISPACKAGE, RHNSOLARISPATCHEDPACKAGE, RHNSOLARISPATCHPACKAGES, RHNERRATAFILEPACKAGESOURCE, RHNERRATAFILEPACKAGETMP, RHNERRATAPACKAGE, RHNERRATAPACKAGETMP, RHNKICKSTARTPACKAGE, RHNPACKAGEARCH, RHNPACKAGECONFLICTS, RHNPACKAGEDELTA, RHNPACKAGEDELTAELEMENT, RHNPACKAGEEVR, RHNTRANSACTIONPACKAGE, RHNSERVERNEEDEDPACKAGECACHE, RHNSERVERPACKAGE, RHNSERVERPACKAGEARCHCOMPAT, RHNPACKAGE, RHNPACKAGECAPABILITY, RHNPACKAGECHANGELOG, RHNPACKAGEFILE, RHNPACKAGEFILEDELETEQUEUE, RHNPACKAGEGROUP, RHNPACKAGEKEY, RHNPACKAGEKEYASSOCIATION, RHNPACKAGEKEYTYPE, RHNPACKAGENAME, RHNPACKAGENEVRA, RHNPACKAGEOBSOLETES, RHNPACKAGEPROVIDER, RHNPACKAGEPROVIDES, RHNPACKAGEREQUIRES, RHNPACKAGESENSE, RHNPACKAGESENSEMAP, RHNPACKAGESOURCE, RHNPACKAGESYNCBLACKLIST  || RHNCHANNELNEWESTPACKAGEVIEW, RHNCHANNELPACKAGEOVERVIEW, RHNHISTORYVIEW_PACKAGES, RHNORGPACKAGEOVERVIEW, RHNSERVERNEEDEDPACKAGEVIEW, RHNSERVEROUTDATEDPACKAGES || rhn_package, rhn_rpm || Package_queries.xml, package_search_elaborators.xml, package_search_setbuilder.xml, {{{PackageArch.hbm.xml}}}, {{{PackageCapability.hbm.xml}}}, {{{PackageDelta.hbm.xml}}}, {{{PackageEvr.hbm.xml}}}, {{{PackageKey.hbm.xml}}}, {{{PackageKeyType.hbm.xml}}}, {{{PackageName.hbm.xml}}}, {{{PackageProvider.hbm.xml}}}, {{{Package_satellite.hbm.xml}}}, {{{PackageSource.hbm.xml}}}  || <perl> ||  <python> || Notes ||
|| Errata || <tables> || <views> || <packages> || <java> || <perl> ||  <python> || Notes ||
|| Registration || <tables> || <views> || <packages> || <perl> ||  <python> || Notes ||
|| RHN Sync || <tables> || <views> || <packages> || <java> || <perl> ||  <python> || Notes ||