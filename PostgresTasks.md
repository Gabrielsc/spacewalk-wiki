

For up-to-date information about the PostgreSQL port, see [[PostgreSQL]]. This page is now obsolete.

----
## Project Tasks



Project tasks are work items that need to be tracked.  They are different then issues in that items listed here
simply need to be completed and are not necessarily risks to the project.
### General



| *ID* | *Name* | *Description* | *Status* | *Assigned* | *Notes* |
| --- | --- | --- | --- | --- | --- |
| G1 | Dead Query Script | Write a script to: find queries defined but not referenced in perl code; find queries defined but not referenced in java code; find queries defined in both (perl migrated to java). |  done  | dgoodwin |  determined that the number of queries involved did not warrant the risk  |
| G2 | Query Script | Enhance script to list files containing SQL; provides file and query counts |  done  |  zeus  |  [script](attachment_file_query_count) |
| G3 | Query File List | Publish _final_ list of files containing queries that need to be tagged.  This item will be created by merging script task(s) output |  done  |  jortel  |  Included in G7 |
| G4 | Add comments | Add SQL comments to every query and view  |   |  bmomjian  |   |  |
| G5 | Postgres Schema | Create test version of Postgres schema, for testing of queries |  done  |  jortel  |  Used ora2pg 4.11 generated [[ddl](attachment_ddl.sql.gz_format=raw)] *DDL only*.  See G10.  |
| G6 | Database Versions | What is the minimum supported version of  Postgres? |  done  |  jortel  |  ![[1]] This will depend on targeted versions of RHEL.  *Decided*: RHEL5+ which means *8.1+* |
| G7 | Custom Data Type | Add EVR_T data type with aggregate |   |    |  Only (1) table with this column type: RHNPACKAGEEVR.  |
| G8 | Prepare git branch | Either clean up the existing postgres branch, or create a new branch and _cherry pick_ Devin's changes |  done  | dgoodwin |  Would be good to have this by COB 12/19  |
| G9 | Postgres Dev Packages | Create a devel yum repo containing custom packages required for satellite to use __both__ oracle and postgres |   |  dgoogwin |   |  |
| G10 | Postgres DDL |  Publish an initial postgres schema generated by ora2pg   |  done  |  jortel,bmomjian  |  Files added to git and are to be cleaned up by bmomjian  |
| G11 | Sample Dataset | Create a sample database dataset that can be loaded in both oracle and postgres to be used by developers |   |  jortel |  |  |
| G12 | Monitoring | Are we converting the monitoring module? |  done  |  tsanders  |  Yes  |
| G13 | Remove dead java queries |  Remove the dead java data source queries from git  |  done  |  dgoodwin  |    |  |
| G14 | Orafce |  Orafce requires Postgres 8.2; port Orafce to Postgres 8.1; packaging issues?  |   |  bmomjian  |  Orafce 3.0 back-ported to 8.1 in orafce CVS |
| G15 |  Setup schema review meeting  |  Have developers review schema beforehand, meet to discuss core tables and answer questions with as many developers as possible.  |  done  |  jortel  |   |  |
| G16 |  db-control  |  what about the RHN db-control stuff.  It's probably oracle based  |   |   |   |  |
| G17 |  Prioritized Modules  |  Provide a prioritized list of modules (feature sets).   |  25% done  |  jortel  |  Iteration 1 scoped but need to do 3+.  |
### Queries



| *ID* | *Name* | *Description* | *Status* | *Assigned* | *Notes* |
| --- | --- | --- | --- | --- | --- | --- |
| Q1 | Sysdate |  Convert sysdate to appropriate current_date and current_timestamp  |   |   |   |  |
| Q2 | Sysdate addition |  Add Postgres timestamp + float compatibility operator  |   |   |   |  |
| Q3 | nextval() |  Handle nextval() differences  |   |   |   |  |
### Table (DDL) Migration



Here is the assignment table for migrating the table DDL.  Please put you name in the _Assigned_ column __before__ you begin working on a table.  Start by copying
oracle .sql file located in $GIT/spacewalk/schema/spacewalk/rhnsat/tables to $GIT/spacewalk/schema/spacewalk/postgresql/tables.  Then proceed with the migration.
Also, please note any items of interest in the _notes_ column and be sure to follow the [porting guidelines](PostgresPortingGuidelines).

[Table Migration](PgportTables).
### View Migration



Here is the assignment table for migrating the view DDL.  Please put you name in the _Assigned_ column __before__ you begin working on a view.  Start by copying
oracle .sql file located in $GIT/spacewalk/schema/spacewalk/rhnsat/views to $GIT/spacewalk/schema/spacewalk/postgresql/views  Then proceed with the migration.
Also, please note any items of interest in the _notes_ column and be sure to follow the [porting guidelines](PostgresPortingGuidelines).

[View Migration](PgportViews).
### Stored Procedure Migration



Here is the assignment table for migrating the stored procedures __not__ associated with a package.  Please put you name in the _Assigned_ column __before__ you begin 
working on a procedure.  Start by copying oracle .sql file located in $GIT/spacewalk/schema/spacewalk/rhnsat/procs to $GIT/spacewalk/schema/spacewalk/postgresql/procedures.
Then proceed with the migration.  Also, please note any items of interest in the _notes_ column and sure to follow the [porting guidelines](PostgresPortingGuidelines).

[Stored Procedure Migration](PgportProcedures)
### Trigger Migration

[Trigger Migration status](PgportTriggers)

### Notes

 ![[1]]:: 

 RHEL-4 includes postgres 7.4 and RHEL-5 includes postgres 8.1.  The latest postgres is 8.3.8.
 7.4 has the following limitations (Exceptions, Save Points) appear to be applicable to spacewalk.
